<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>Provider信息——资源管理</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <link rel="stylesheet" href="/app/js/bootstrap/css/bootstrap.min.css" type="text/css"/>
    <link rel="stylesheet" href="/app/js/bootstrap/css/bootstrap-responsive.min.css" type="text/css"/>
    <link rel="stylesheet" href="/app/css/tooltip/tooltip.css" type="text/css"/>
    <link rel="stylesheet" href="/app/css/style.css" type="text/css"/>
    <style type="text/css">
        .table td i{margin:0 2px;}
        .active_el { background-color: #AAAAAA;color: #FFFFFF;}</style>
    <script type="text/javascript" src="/app/js/jquery/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="/app/js/jquery/jquery-migrate-1.1.1.min.js"></script>
    <script type="text/javascript" src="/app/js/bootstrap/bootstrap.min.js"></script>
    <script type="text/javascript" src="/app/js/common/common.js"></script>
    <script type="text/javascript" src="/app/js/common/page.js"></script>
    <script type="text/javascript" src="/app/js/common/crud-grid-cmd.js"></script>
    <script type="text/javascript">
        <!--
        var _app='${app}';
        var columns=[
            'x',
            {name:'name',label:'名称',width:'70'},
            {name:'source',label:'资源',editor:'select',vtype:'required',src:"srcCfg-${app}",max:32},
            {name:'type',label:'类型',editor:'select',vtype:'required',src:"providerTypes",max:32},
            {name:'desc',label:'描述',width:'100'},
            {name:'script',label:'脚本',editor:'text',vtype:'required',max:32},
            {name:'op',label:'操作',width:'120',align:'left',render:function(v,data){
                v=data.name;
                var ds=data.source;
                var s='<a href="/cmd/sys/provider?_t=edit&name='+v+'&app='+_app+'">编辑</a>&nbsp;<a href="/cmd/sys/provider?_t=detail&name='+v+'&app='+_app+'">详情</a>&nbsp;<a href="#" onclick="delRow(\''+v+'\')">删除</a>';
                return s;
            },noe:true}
        ];
        var _url='/cmd/sys/provider?app='+_app;
        var _baseUrl='http://127.0.0.1:9081/app';
        var _imgRoot='http://127.0.0.1:9081/img';
        var _UI;

        var rowDblClick=function(r){
            self.location="/cmd/sys/provider?_t=edit&name="+r._id+"&app="+_app;
        };

        var delRow = function(v){
            _CRUD_.openAlert({
                confirm : '确认删除该记录么?',
                ok : function() {
                    _CRUD_.deleteRow(_UI.url, v, _UI.grid);
                }
            });
        };
        $(document).ready(function() {
            _CRUD_.baseUrl=_imgRoot;
            _UI = _CRUD_.renderTable({
                url:_url,
                cols:columns,
                idFeild:'name',
                searchEl:'#searchForm',
                rowDblClick:rowDblClick,
                opBar:[_CRUD_.opBar[0],{
                    name:'保存',
                    func:function(grid){
                        Common.post('/cmd/sys/provider',{_t:'sp',app:_app},function(d){
                            _CRUD_.openAlert(d.msg);
                        });
                    }
                } ,_CRUD_.opBar[1]],
                showDetail:true,
                showMenu:false,
                canOp:true
            });
        });
        -->
    </script>
</head>
<body>
<ul class="nav nav-tabs">
    <li><a href="/app/mngr/app/app.html">App应用</a></li>
    <li class="active"><a href="#">Provider列表</a></li>
    <li><a href="/cmd/sys/provider?_t=add&app=${app}">增加Provider</a></li>
</ul>
<div id="searchForm">
</div>
<div id="grid">
</div>
<div id="pageBar" class="pagination" style="margin-top:0px;">
</div>
</body>
</html>